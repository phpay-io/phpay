#!/usr/bin/env sh

echo "============================================="
echo "Running pre-push hook ğŸš€"
echo "============================================="
echo "\n"
echo "============================================="
echo "Running pint tests ğŸ§ª"
echo "============================================="

pint_output=$(./vendor/bin/pint --test 2>&1)

if [ $? -ne 0 ]; then
    echo "Pint tests failed. Please fix the issues before pushing."
    exit 1
fi

echo "ğŸŸ¢ Pint Ok!"

echo "\n"

echo "============================================="
echo "Running pest tests ğŸ§ª"
echo "============================================="

pest_output=$(./vendor/bin/pest --colors=always --stop-on-failure 2>&1)

if [ $? -ne 0 ]; then
    echo "ğŸ›‘ Pest tests failed. Please fix the issues before pushing."
    echo "$pest_output"
    exit 1
fi

echo "ğŸŸ¢ Pest Ok!"
echo "\n"